Index: isisd/ChangeLog
===================================================================
RCS file: /var/cvsroot/quagga/isisd/ChangeLog,v
retrieving revision 1.6
retrieving revision 1.7
diff -u -r1.6 -r1.7
--- isisd/ChangeLog	8 May 2004 11:48:26 -0000	1.6
+++ isisd/ChangeLog	19 May 2004 11:38:40 -0000	1.7
@@ -1,3 +1,8 @@
+2004-05-19 Rivo Nurges <rix at estpak.ee>
+
+	* *.c: Removing many useless net/ethernet.h includes and some tiny
+	  fixes to make it compile on NetBSD and OpenBSD.
+
 2004-05-08 Paul Jakma <paul@dishone.st>
 
 	* isis_zebra.c: Sync with zclient changes.
Index: isisd/isis_adjacency.c
===================================================================
RCS file: /var/cvsroot/quagga/isisd/isis_adjacency.c,v
retrieving revision 1.3
retrieving revision 1.4
diff -u -r1.3 -r1.4
--- isisd/isis_adjacency.c	9 Feb 2004 11:09:39 -0000	1.3
+++ isisd/isis_adjacency.c	19 May 2004 11:38:40 -0000	1.4
@@ -25,8 +25,6 @@
 #include <limits.h>
 #include <string.h>
 #include <zebra.h>
-#include <net/ethernet.h>
-
 
 #include "log.h"
 #include "memory.h"
Index: isisd/isis_circuit.c
===================================================================
RCS file: /var/cvsroot/quagga/isisd/isis_circuit.c,v
retrieving revision 1.5
retrieving revision 1.6
diff -u -r1.5 -r1.6
--- isisd/isis_circuit.c	11 Feb 2004 20:26:31 -0000	1.5
+++ isisd/isis_circuit.c	19 May 2004 11:38:40 -0000	1.6
@@ -23,7 +23,11 @@
 #include <stdio.h>
 #include <ctype.h>
 #include <zebra.h>
+#ifdef GNU_LINUX
 #include <net/ethernet.h>
+#else
+#include <netinet/if_ether.h>
+#endif
 
 #include "log.h"
 #include "memory.h"
Index: isisd/isis_csm.c
===================================================================
RCS file: /var/cvsroot/quagga/isisd/isis_csm.c,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -r1.1 -r1.2
--- isisd/isis_csm.c	23 Dec 2003 08:09:53 -0000	1.1
+++ isisd/isis_csm.c	19 May 2004 11:38:40 -0000	1.2
@@ -21,7 +21,6 @@
  */
 
 #include <zebra.h>
-#include <net/ethernet.h>
 
 #include "log.h"
 #include "memory.h"
Index: isisd/isis_dr.c
===================================================================
RCS file: /var/cvsroot/quagga/isisd/isis_dr.c,v
retrieving revision 1.3
retrieving revision 1.4
diff -u -r1.3 -r1.4
--- isisd/isis_dr.c	11 Feb 2004 20:26:31 -0000	1.3
+++ isisd/isis_dr.c	19 May 2004 11:38:40 -0000	1.4
@@ -23,7 +23,6 @@
 
 
 #include <zebra.h>
-#include <net/ethernet.h>
 
 #include "log.h"
 #include "hash.h"
Index: isisd/isis_dynhn.c
===================================================================
RCS file: /var/cvsroot/quagga/isisd/isis_dynhn.c,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -r1.2 -r1.3
--- isisd/isis_dynhn.c	23 Dec 2003 08:56:19 -0000	1.2
+++ isisd/isis_dynhn.c	19 May 2004 11:38:40 -0000	1.3
@@ -22,7 +22,6 @@
 
 #include <time.h>
 #include <zebra.h>
-#include <net/ethernet.h>
 
 #include "vty.h"
 #include "linklist.h"
Index: isisd/isis_events.c
===================================================================
RCS file: /var/cvsroot/quagga/isisd/isis_events.c,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -r1.2 -r1.3
--- isisd/isis_events.c	11 Feb 2004 20:26:31 -0000	1.2
+++ isisd/isis_events.c	19 May 2004 11:38:40 -0000	1.3
@@ -23,7 +23,6 @@
 #include <stdio.h>
 #include <ctype.h>
 #include <zebra.h>
-#include <net/ethernet.h>
 
 #include "log.h"
 #include "memory.h"
Index: isisd/isis_lsp.c
===================================================================
RCS file: /var/cvsroot/quagga/isisd/isis_lsp.c,v
retrieving revision 1.4
retrieving revision 1.5
diff -u -r1.4 -r1.5
--- isisd/isis_lsp.c	11 Feb 2004 20:26:31 -0000	1.4
+++ isisd/isis_lsp.c	19 May 2004 11:38:40 -0000	1.5
@@ -23,7 +23,6 @@
 #include <stdlib.h>
 #include <stdio.h>
 #include <zebra.h>
-#include <net/ethernet.h>
 
 #include "linklist.h"
 #include "thread.h"
Index: isisd/isis_main.c
===================================================================
RCS file: /var/cvsroot/quagga/isisd/isis_main.c,v
retrieving revision 1.6
retrieving revision 1.7
diff -u -r1.6 -r1.7
--- isisd/isis_main.c	16 Mar 2004 14:38:36 -0000	1.6
+++ isisd/isis_main.c	19 May 2004 11:38:40 -0000	1.7
@@ -22,7 +22,6 @@
 
 #include <stdio.h>
 #include <zebra.h>
-#include <net/ethernet.h>
 
 #include "getopt.h"
 #include "thread.h"
@@ -104,8 +103,8 @@
 char *pid_file = PATH_ISISD_PID;
 
 /* for reload */
-char _cwd[64];
-char _progpath[64];
+char _cwd[MAXPATHLEN];
+char _progpath[MAXPATHLEN];
 int _argc;
 char **_argv;
 char **_envp;
Index: isisd/isis_misc.c
===================================================================
RCS file: /var/cvsroot/quagga/isisd/isis_misc.c,v
retrieving revision 1.3
retrieving revision 1.4
diff -u -r1.3 -r1.4
--- isisd/isis_misc.c	23 Dec 2003 11:51:08 -0000	1.3
+++ isisd/isis_misc.c	19 May 2004 11:38:40 -0000	1.4
@@ -27,7 +27,6 @@
 #include <time.h>
 #include <ctype.h>
 #include <zebra.h>
-#include <net/ethernet.h>
 #include <sys/utsname.h>
 
 #include "stream.h"
Index: isisd/isis_network.c
===================================================================
RCS file: /var/cvsroot/quagga/isisd/isis_network.c,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -r1.2 -r1.3
--- isisd/isis_network.c	23 Dec 2003 08:56:19 -0000	1.2
+++ isisd/isis_network.c	19 May 2004 11:38:40 -0000	1.3
@@ -24,7 +24,13 @@
 #include <sys/socket.h>
 #include <errno.h>
 #include <zebra.h>
+#ifdef GNU_LINUX
 #include <net/ethernet.h>     /* the L2 protocols */
+#else
+#include <net/if.h>
+#include <netinet/if_ether.h>
+#endif
+
 
 #include "log.h"
 #include "stream.h"
@@ -237,12 +243,14 @@
     zlog_warn ("failed to set BPF dev to immediate mode");
   }
 
+#ifdef BIOCSSEESENT
   /*
    * We want to see only incoming packets
    */
   if (ioctl (fd, BIOCSSEESENT, (caddr_t)&false) < 0) {
     zlog_warn ("failed to set BPF dev to incoming only mode");
   }
+#endif
 
   /*
    * ...but all of them
Index: isisd/isis_pdu.c
===================================================================
RCS file: /var/cvsroot/quagga/isisd/isis_pdu.c,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -r1.2 -r1.3
--- isisd/isis_pdu.c	11 Feb 2004 20:26:31 -0000	1.2
+++ isisd/isis_pdu.c	19 May 2004 11:38:40 -0000	1.3
@@ -24,7 +24,6 @@
 #include <stdio.h>
 #include <string.h>
 #include <zebra.h>
-#include <net/ethernet.h>
 
 #include "memory.h"
 #include "thread.h"
Index: isisd/isis_route.c
===================================================================
RCS file: /var/cvsroot/quagga/isisd/isis_route.c,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -r1.1 -r1.2
--- isisd/isis_route.c	23 Dec 2003 08:10:08 -0000	1.1
+++ isisd/isis_route.c	19 May 2004 11:38:40 -0000	1.2
@@ -25,7 +25,6 @@
 #include <stdlib.h>
 #include <stdio.h>
 #include <zebra.h>
-#include <net/ethernet.h>
 
 #include "thread.h"
 #include "linklist.h"
Index: isisd/isis_routemap.c
===================================================================
RCS file: /var/cvsroot/quagga/isisd/isis_routemap.c,v
retrieving revision 1.1
retrieving revision 1.2
diff -u -r1.1 -r1.2
--- isisd/isis_routemap.c	23 Dec 2003 08:10:08 -0000	1.1
+++ isisd/isis_routemap.c	19 May 2004 11:38:40 -0000	1.2
@@ -23,7 +23,6 @@
 #include <stdlib.h>
 #include <stdio.h>
 #include <zebra.h>
-#include <net/ethernet.h>
 
 #include "thread.h"
 #include "linklist.h"
Index: isisd/isis_spf.c
===================================================================
RCS file: /var/cvsroot/quagga/isisd/isis_spf.c,v
retrieving revision 1.3
retrieving revision 1.4
diff -u -r1.3 -r1.4
--- isisd/isis_spf.c	11 Feb 2004 20:26:31 -0000	1.3
+++ isisd/isis_spf.c	19 May 2004 11:38:40 -0000	1.4
@@ -24,7 +24,6 @@
 #include <stdlib.h>
 #include <stdio.h>
 #include <zebra.h>
-#include <net/ethernet.h>
 
 #include "thread.h"
 #include "linklist.h"
Index: isisd/isis_tlv.c
===================================================================
RCS file: /var/cvsroot/quagga/isisd/isis_tlv.c,v
retrieving revision 1.2
retrieving revision 1.3
diff -u -r1.2 -r1.3
--- isisd/isis_tlv.c	23 Dec 2003 11:51:08 -0000	1.2
+++ isisd/isis_tlv.c	19 May 2004 11:38:40 -0000	1.3
@@ -22,7 +22,6 @@
  */
 
 #include <zebra.h>
-#include <net/ethernet.h>
 
 #include "log.h"
 #include "linklist.h"
Index: isisd/isis_zebra.c
===================================================================
RCS file: /var/cvsroot/quagga/isisd/isis_zebra.c,v
retrieving revision 1.3
retrieving revision 1.4
diff -u -r1.3 -r1.4
--- isisd/isis_zebra.c	8 May 2004 11:48:26 -0000	1.3
+++ isisd/isis_zebra.c	19 May 2004 11:38:40 -0000	1.4
@@ -21,7 +21,6 @@
  */
 
 #include <zebra.h>
-#include <net/ethernet.h>
 
 #include "thread.h"
 #include "command.h"
Index: isisd/isisd.c
===================================================================
RCS file: /var/cvsroot/quagga/isisd/isisd.c,v
retrieving revision 1.4
retrieving revision 1.5
diff -u -r1.4 -r1.5
--- isisd/isisd.c	11 Feb 2004 20:26:31 -0000	1.4
+++ isisd/isisd.c	19 May 2004 11:38:40 -0000	1.5
@@ -22,7 +22,6 @@
 
 #include <string.h>
 #include <zebra.h>
-#include <net/ethernet.h>
 
 #include "thread.h"
 #include "vty.h"
